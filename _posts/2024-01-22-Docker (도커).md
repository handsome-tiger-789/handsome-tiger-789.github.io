---
layout: post
title:  "Docker (도커)"
date:   2024-01-22 11:00:00 +0900
category: [클라우드]
tags: [클라우드, Docker, container]
lastmod : 2024-01-22 11:00:00 +0900
sitemap :
  changefreq : daily
  priority : 1.0
---

# 자주 사용하는 명령어
1. docker 사용하지 않는 모든 자원 삭제(강제) : `docker system prune -a -f`
2. 사용하지 않는 이미지 삭제 : `docker image prune`
3. 컨테이너에서 사용하지 않는 모든 볼륨 삭제 : `docker volume prune`
4. 현재 사용하지 않는 리소스 삭제 : `docker system prune`

# 이미지 용량 이슈
RUN 명령어 마다 image를 생성하기 때문에 파일의 크기가 크다면 RUN 명령어가 많을 수록 이미지 크기가 커지는 문제 발생 <br>
(Elasticsearch 가 tar 폴더만 1GB 였는데 RUN 명령어 때문에 7GB 사이즈 까지 증가하는 문제가 발생하였음) <br>

<br>

RUN 명령어 마다 스냅샷을 생성하여 합치는 부분 때문에 해당 부분은 검색하면 여러 리소스를 찾아볼 수 있음


# 도커 멀티 스테이지 빌드

빌드에 필요한 컨테이너 용량과 실행에 필요한 컨테이너 용량이 차이가 많이 날 때 사용하는 방법


